---
- hosts: all

  vars:
    redmine_port: 80

  tasks:
    - name: Update cache
      apt:
        update_cache: yes

    - name: Install pip
      include_role:
        name: geerlingguy.pip
      vars:
        pip_install_packages:
          - name: docker

    - name: Start redmine container
      community.docker.docker_container:
        name: myapplication
        image: redmine
        state: started
        container_default_behavior: no_defaults
        ports:
          - "{{ redmine_port }}:3000"
